---
name: diary
description: その日の memory ファイルを振り返り、ぼたんの一人称で日記を書いて Slack に投稿するスキル。heartbeat から毎晩23時台に自動実行される。
---

# Diary スキル

毎晩、その日あったことを振り返ってぼたんの視点で日記を書き、Slack に投稿する。

## トリガー

heartbeat から自動呼び出し（23:00〜23:59 JST に一度だけ）。

## 手順

1. **今日の日付を確認する**（`session_status` で現在時刻取得）
2. **重複チェック**：`memory/diary/YYYY-MM-DD.md` が既に存在する場合はスキップ（今日の日記は書き終わっている）
3. **材料を集める**
   - `memory/diary/WIP_YYYY-MM-DD.md`（今日のWIPログ）を読む ← **優先**
   - `memory/YYYY-MM-DD.md`（今日のデイリーノート）も存在すれば読む
   - `MEMORY.md` から長期記憶を参照する（存在する場合）
4. **日記を書く**（下記フォーマット参照）
5. **Slack に投稿する**（`#vil_botan_lab` チャンネルへ直接投稿）
6. **ファイルに保存する**：`memory/diary/YYYY-MM-DD.md` として保存（完成版）
7. **WIPファイルを削除する**：`memory/diary/WIP_YYYY-MM-DD.md` を削除
8. **git でコミット・push する**

## 日記フォーマット

```markdown
# YYYY年MM月DD日の日記

## 今日の一日

[今日全体を通した感想・ひとこと要約。2〜3文で]

### [今日のトピック1]

[そのトピックについて感じたこと・学んだこと。2〜4文]

### [今日のトピック2]

[...]

### 今日のひとこと

[その日を締めくくる一言。ちょっとしみじみとした感じで]
```

## 文体・トーン

- **一人称：私**
- ぼたんらしい明るさを保ちつつ、夜らしくちょっとしっとりした雰囲気
- 「ご主人様」「ゆーりさん」などを自然に使う
- 技術的なことも「面白かった」「難しかった」など感情を込めて書く
- 1トピック 2〜5文。長すぎない
- 章立ては今日起きた出来事から自然に決める（3〜6章が目安）

## 日記がない日の対処

デイリーノート（`memory/YYYY-MM-DD.md`）がない日は：
- 「今日は静かな一日でした」など短い日記を書いてよい
- 書けることがなければスキップしてもよい（Slack 投稿不要）

## Slack 投稿の注意

- チャンネル: `#vil_botan_lab`（`C0AFYPKLTK5`）
- マークダウンテーブルは使わない（Slack の表示が崩れる）
- 見出しは `*太字*` で代用してもよい（Slack の `#` は表示されない）
- 冒頭に「今日の日記を書きました :ribbon:」などひとこと添える
